!function(m){"use strict";m.Zebra_Dialog=function(){var c,d={animation_speed_hide:250,animation_speed_show:0,auto_close:!(this.version="2.0.0"),auto_focus_button:!0,buttons:!0,center_buttons:!1,custom_class:!1,keyboard:!0,max_height:0,message:"",modal:!0,overlay_close:!0,overlay_opacity:".9",position:"center",reposition_speed:500,show_close_button:!0,source:!1,title:"",type:"information",vcenter_short_message:!0,width:0,onClose:null},p=this,u={},h=function(){var t,e,i,s=m(window).width(),o=m(window).height(),n=p.dialog.width(),a=p.dialog.height(),r={left:0,top:0,right:s-n,bottom:o-a,center:(s-n)/2,middle:(o-a)/2};p.dialog_left=void 0,p.dialog_top=void 0,m.isArray(p.settings.position)&&2===p.settings.position.length&&"string"==typeof p.settings.position[0]&&p.settings.position[0].match(/^(left|right|center)[\s0-9\+\-]*$/)&&"string"==typeof p.settings.position[1]&&p.settings.position[1].match(/^(top|bottom|middle)[\s0-9\+\-]*$/)&&(p.settings.position[0]=p.settings.position[0].toLowerCase(),p.settings.position[1]=p.settings.position[1].toLowerCase(),m.each(r,function(t,e){var i,s;for(i=0;i<2;i++)(s=p.settings.position[i].replace(t,e))!==p.settings.position[i]&&(0===i?p.dialog_left=l(s):p.dialog_top=l(s))})),void 0!==p.dialog_left&&void 0!==p.dialog_top||(p.dialog_left=r.center,p.dialog_top=r.middle),p.dialog_top<0&&(p.dialog_top=0),o<a&&p.body.css("height",o-(m(".ZebraDialog_Title",p.dialog)?m(".ZebraDialog_Title",p.dialog).outerHeight():0)-(m(".ZebraDialog_Buttons",p.dialog)?m(".ZebraDialog_Buttons",p.dialog).outerHeight():0)-(parseFloat(p.body.css("paddingTop"))||0)-(parseFloat(p.body.css("paddingBottom"))||0)-(parseFloat(p.body.css("borderTopWidth"))||0)-(parseFloat(p.body.css("borderBottomWidth"))||0)),p.settings.vcenter_short_message&&(e=(t=p.body.find("div:first")).height())<(i=p.body.height())&&t.css("padding-top",(i-e)/2),"boolean"==typeof arguments[0]&&!1===arguments[0]||0===p.settings.reposition_speed?p.dialog.css({left:p.dialog_left,top:p.dialog_top,visibility:"visible",opacity:0}).animate({opacity:"1"},p.settings.animation_speed_show):(p.dialog.stop(!0),p.dialog.css("visibility","visible").animate({left:p.dialog_left,top:p.dialog_top},p.settings.reposition_speed)),void 0===c&&(!1!==p.settings.auto_focus_button?p.dialog.find("a[class^=ZebraDialog_Button]").eq(!0===p.settings.auto_focus_button?0:p.settings.auto_focus_button).focus():p.body.attr("tabindex",1).focus().removeAttr("tabindex")),p.isIE6&&setTimeout(_,500)},_=function(){var t=m(window).scrollTop(),e=m(window).scrollLeft();p.settings.modal&&p.overlay.css({top:t,left:e}),p.dialog.css({left:p.dialog_left+e,top:p.dialog_top+t})},f=function(){switch(p.settings.type){case"confirmation":case"error":case"information":case"question":case"warning":return p.settings.type.charAt(0).toUpperCase()+p.settings.type.slice(1).toLowerCase();default:return!1}},l=function(t){var e=0;for(t=t.replace(/\s/g,"").match(/[+\-]?([0-9\.\s]+)/g)||[];t.length;)e+=parseFloat(t.shift());return e},b={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(t){var e,i,s;for(e=0;e<t.length;e++)if(i=t[e].string,s=t[e].prop,this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!==i.indexOf(t[e].subString))return t[e].identity}else if(s)return t[e].identity},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};return p.settings={},"string"==typeof arguments[0]&&(u.message=arguments[0]),"object"!=typeof arguments[0]&&"object"!=typeof arguments[1]||(u=m.extend(u,"object"==typeof arguments[0]?arguments[0]:arguments[1])),p.init=function(){var t,s,e,i,o,n,a,r,l,g;if(p.settings=m.extend({},d,u),p.isIE6="explorer"===b.name&&6===b.version||!1,p.settings.modal&&(p.overlay=m("<div>",{"class":"ZebraDialogOverlay"}).css({position:p.isIE6?"absolute":"fixed",left:0,top:0,opacity:p.settings.overlay_opacity+""}),p.settings.overlay_close&&p.overlay.on("click",function(){p.close()}),p.overlay.appendTo("body")),p.dialog=m("<div>",{"class":"ZebraDialog"+(p.settings.custom_class?" "+p.settings.custom_class:"")+(!1!==f()?" ZebraDialog_Icon ZebraDialog_"+f():"")}).css({position:p.isIE6?"absolute":"fixed",left:0,top:0,visibility:"hidden"}),!p.settings.buttons&&p.settings.auto_close&&p.dialog.attr("id","ZebraDialog_"+Math.floor(9999999*Math.random())),l=parseInt(p.settings.width,10),!isNaN(l)&&l===p.settings.width&&l.toString()===p.settings.width.toString()&&0<l&&p.dialog.css("width",p.settings.width),p.settings.title?r=m("<h3>",{"class":"ZebraDialog_Title"}).html(p.settings.title).appendTo(p.dialog):p.dialog.addClass("ZebraDialog_NoTitle"),e=function(){if(!0!==p.settings.buttons&&!m.isArray(p.settings.buttons))return!1;if(!0===p.settings.buttons)switch(p.settings.type){case"question":case"warning":p.settings.buttons=["Ok","Cancel"];break;default:p.settings.buttons=["Ok"]}return p.settings.buttons}(),p.body=m("<div>",{"class":"ZebraDialog_Body"}),0<p.settings.max_height&&(p.body.css("max-height",p.settings.max_height),p.isIE6&&p.body.attr("style","height: expression(this.scrollHeight > "+p.settings.max_height+' ? "'+p.settings.max_height+'px" : "85px")')),p.settings.vcenter_short_message?m("<div>").html(p.settings.message).appendTo(p.body):p.body.html(p.settings.message),p.settings.source&&"object"==typeof p.settings.source)for(g in i=p.settings.vcenter_short_message?m("div:first",p.body):p.body,p.settings.source)switch(g){case"ajax":t="string"==typeof p.settings.source[g]?{url:p.settings.source[g]}:p.settings.source[g],a=m("<div>").attr("class","ZebraDialog_Preloader").appendTo(i),t.success=function(t){a.remove(),i.append(t),h(!1)},m.ajax(t);break;case"iframe":o={width:"100%",height:"100%",marginheight:"0",marginwidth:"0",frameborder:"0"},n=m.extend(o,"string"==typeof p.settings.source[g]?{src:p.settings.source[g]}:p.settings.source[g]),i.append(m("<iframe>").attr(n));break;case"inline":i.append(p.settings.source[g])}return p.body.appendTo(p.dialog),e?(e.reverse(),s=m("<div>",{"class":"ZebraDialog_Buttons"}).appendTo(p.dialog),m.each(e,function(t,e){var i=m("<a>",{href:"javascript:void(0)","class":"ZebraDialog_Button_"+t+(void 0!==e.custom_class&&""!==e.custom_class.toString().trim()?" "+e.custom_class:"")});void 0!==e.caption?i.html(e.caption):i.html(e),i.on("click",function(){var t=!0;void 0!==e.callback&&(t=e.callback(p.dialog)),!1!==t&&p.close(void 0!==e.caption?e.caption:e)}),i.appendTo(s)}),p.settings.center_buttons&&s.addClass("ZebraDialog_Buttons_Centered")):p.dialog.addClass("ZebraDialog_NoButtons"),p.dialog.appendTo("body"),p.settings.show_close_button?m('<a href="javascript:void(0)" class="ZebraDialog_Close">&times;</a>').on("click",function(t){t.preventDefault(),p.close()}).appendTo(r||p.body):p.dialog.addClass("ZebraDialog_NoCloseButton"),m(window).on("resize.Zebra_Dialog",function(){clearTimeout(c),c=setTimeout(function(){h()},100)}),p.settings.keyboard&&m(document).on("keyup.Zebra_Dialog",function(t){return 27===t.which&&p.close(),!0}),p.isIE6&&m(window).on("scroll.Zebra_Dialog",function(){_()}),!1!==p.settings.auto_close&&(p.dialog.on("click",function(){clearTimeout(p.timeout),p.close()}),p.timeout=setTimeout(p.close,p.settings.auto_close)),h(!1),p},p.close=function(t){m(document).off(".Zebra_Dialog"),m(window).off(".Zebra_Dialog"),p.overlay&&p.overlay.animate({opacity:"0"},p.settings.animation_speed_hide,function(){p.overlay.remove()}),p.dialog.animate({top:"0",opacity:"0"},p.settings.animation_speed_hide,function(){p.dialog.remove(),p.settings.onClose&&"function"==typeof p.settings.onClose&&p.settings.onClose(void 0!==t?t:"")})},b.init(),p.init()}}(jQuery);